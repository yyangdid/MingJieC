---
title: "ç¬¬äºŒç« _ä¸“æ³¨äºæ˜¾ç¤º"
---

# ğŸš€ é¢å¤–è¡¥å……

ä¹¦ä¸­å¤§é‡ä½¿ç”¨äº† `clock()` å‡½æ•°æ¥è®¡ç®—ç¨‹åºè¿è¡Œæˆ–è¿ç®—çš„æ—¶é—´ï¼Œ
ä½†æ˜¯è¿™åœ¨ Linux ä¸‹è®¡ç®—å¾—åˆ°çš„æ€»æ˜¯ 0 ç§’ï¼Œå¦‚æœä½¿ç”¨ `time(NULL)`
å‡½æ•°å¾—åˆ°çš„ç²¾åº¦åªåˆ°ç§’ï¼Œåˆä¸å¤Ÿç”¨ï¼Œ
æœ¬ç« èŠ‚æˆ–æœ¬ä¹¦ä¸­æ‰€æœ‰è®¡ç®—æ—¶é—´å·®çš„åœ°æ–¹åœ¨ Linux ç³»ç»Ÿä¸­éƒ½å¯ä»¥ä½¿ç”¨ä¸‹é¢ç¤ºä¾‹ä¸­çš„
ä¸¤ç§æ–¹æ³•æ¥æ›¿æ¢ä¹¦ä¸­çš„æ—¶é—´å·®è®¡ç®—æ–¹æ³•ï¼š

- ç²¾ç¡®åˆ°å¾®ç§’

  ```c
  /**
   * @file main.c
   * @brief è·å–æ—¶é—´å·®ï¼ˆå¯ç²¾ç¡®åˆ°å¾®ç§’ï¼‰
   * @version 0.0.1
   * @date 2022-01-02 21:23:30
   * @author yyangdid (yyangdid@gmail.com)
   */

  #include <stdio.h>
  #include <sys/time.h>

  /**
   * @brief è·å–å½“å‰æ—¶é—´ï¼ˆå°æ•°ç‚¹å‰ä¸€ä½å•ä½ä¸ºç§’ï¼Œå°æ•°ç‚¹åç¬¬å…­ä½å•ä½ä¸ºå¾®ç§’ï¼‰
   * @return double, å½“å‰æ—¶é—´ï¼ˆå°æ•°ç‚¹å‰ä¸€ä½å•ä½ä¸ºç§’ï¼Œå°æ•°ç‚¹åç¬¬å…­ä½å•ä½ä¸ºå¾®ç§’ï¼‰
   */
  double get_system_time() {
    struct timeval t;
    gettimeofday(&t, NULL);
    // t.tv_sec æ˜¯ä» 1970 å¹´åˆ°æ­¤åˆ»è¿‡äº†å¤šå°‘ç§’
    // t.tv_usec æ˜¯å½“å‰ç§’è¿‡äº†å¤šå°‘å¾®ç§’
    return t.tv_sec + t.tv_usec / 1000000.0;
  }

  int main(void) {
    int a;
    double start, end;

    start = get_system_time();
    printf("è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼š");
    scanf("%d", &a);
    end = get_system_time();

    printf("ç”¨æ—¶ï¼š%f ç§’\n", end - start);

    return 0;
  }
  ```

- ç²¾ç¡®åˆ°æ¯«ç§’

  ```c
  /**
  * @file main.c
  * @brief è·å–è®¡ç®—ç”¨æ—¶ï¼ˆå¯ç²¾ç¡®åˆ°æ¯«ç§’ï¼‰
  * @version 0.0.1
  * @date 2022-01-02 21:09:58
  * @author yyangdid (yyangdid@gmail.com)
  */

  #include <stdio.h>
  #include <sys/timeb.h>

  /**
  * @brief è·å–å½“å‰æ—¶é—´ï¼ˆå°æ•°ç‚¹å‰ä¸€ä½å•ä½ä¸ºç§’ï¼Œå°æ•°ç‚¹åç¬¬ä¸‰ä½å•ä½ä¸ºæ¯«ç§’ï¼‰
  * @return double, å½“å‰æ—¶é—´ï¼ˆå°æ•°ç‚¹å‰ä¸€ä½å•ä½ä¸ºç§’ï¼Œå°æ•°ç‚¹åç¬¬ä¸‰ä½å•ä½ä¸ºæ¯«ç§’ï¼‰
  */
  double get_system_time() {
    struct timeb t;
    ftime(&t);
    // t.time æ˜¯ä» 1970 å¹´åˆ°æ­¤åˆ»è¿‡äº†å¤šå°‘ç§’
    // t.millitm æ˜¯å½“å‰ç§’è¿‡äº†å¤šå°‘æ¯«ç§’
    return t.time + t.millitm / 1000.0;
  }

  int main(void) {
    int a;

    double start = get_system_time();
    printf("è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼š");
    scanf("%d", &a);
    double end = get_system_time();

    printf("ç”¨æ—¶ï¼š%f ç§’\n", end - start);

    return 0;
  }
  ```

# ğŸš€ 2-1: ç†Ÿç»ƒè¿ç”¨è½¬ä¹‰å­—ç¬¦

## âœˆï¸ \n: æ¢è¡Œç¬¦

- List 2-1: è¾“å‡ºæŠ¥è­¦ç¬¦ `\a` å’Œæ¢è¡Œç¬¦ `\n`

  ```c
  /**
   * @file chap02/alert_newline.c
   * @brief è¾“å‡ºæŠ¥è­¦ç¬¦ \\a å’Œæ¢è¡Œç¬¦ \\n
   */

  #include <stdio.h>

  int main(void) {
    printf("ä½ å¥½ã€‚\nåˆæ¬¡è§é¢ã€‚\n");
    printf("\aè­¦å‘Šã€‚\n\n");
    printf("\a\aè¿™æ¬¡æ˜¯ç¬¬ 2 æ¬¡è­¦å‘Šã€‚\n");

    return 0;
  }
  ```

## âœˆï¸ \b: é€€æ ¼ç¬¦

- List 2-2: é€€æ ¼ç¬¦ `\b` çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œæ¯éš” 1 ç§’æ¶ˆå» 1 ä¸ªå­—ç¬¦

  ```c
  /**
   * @file chap02/backspace.c
   * @brief é€€æ ¼ç¬¦ \\b çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œæ¯éš” 1 ç§’æ¶ˆå» 1 ä¸ªå­—ç¬¦
   */

  #include <stdio.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€: 1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t) -1)// é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    printf("ABCDEFG");
    for (int i = 0; i < 7; i++) {
      sleep(1000);    // æ¯éš” 1 ç§’
      printf("\b \b");// ä»åé¢é€ä¸ªæ¶ˆé™¤å­—ç¬¦
      fflush(stdout); // æ¸…ç©ºç¼“å†²åŒº
    }

    return 0;
  }
  ```

## âœˆï¸ \r: å›è½¦ç¬¦

- List 2-3: å›è½¦ç¬¦ `\r` çš„ä½¿ç”¨ç¤ºä¾‹ï¼šé‡å†™è¡Œ

  ```c
  /**
   * @file chap02/return.c
   * @brief å›è½¦ç¬¦ \\r çš„ä½¿ç”¨ç¤ºä¾‹ï¼šé‡å†™è¡Œ
   */

  #include <stdio.h>
  #include <time.h>

  /**
     * @brief ç­‰å¾… x æ¯«ç§’
     * @param[in] x æ¯«ç§’
     * @return int, æ‰§è¡ŒçŠ¶æ€: 1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
     */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t) -1)// é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    printf("My name is BohYoh.");
    fflush(stdout);

    sleep(2000);
    printf("\rHow do you do?    ");
    fflush(stdout);

    sleep(2000);
    printf("\rThanks.           ");

    return 0;
  }
  ```

## âœˆï¸ \' å’Œ \": å•å¼•å·å’ŒåŒå¼•å·

- List 2-4: è½¬ä¹‰å­—ç¬¦ `\'` å’Œ `\"` çš„ä½¿ç”¨ç¤ºä¾‹

  ```c
  /**
   * @file chap02/quotation.c
   * @brief è½¬ä¹‰å­—ç¬¦ \\' å’Œ \\" çš„ä½¿ç”¨ç¤ºä¾‹
   */

  #include <stdio.h>

  int main(void) {
    printf("å…³äºå­—ç¬¦ä¸²å¸¸é‡å’Œå­—ç¬¦å¸¸é‡ã€‚\n");

    printf("åŒå¼•å·");
    putchar('"');                                        // å¯ä»¥ç”¨ \"
    printf("ç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„ \"ABC\" æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚\n"); // ä¸å¯ä»¥ç”¨ "

    printf("å•å¼•å·");
    putchar('\'');                                 // ä¸å¯ä»¥ç”¨ '
    printf("ç”¨å•å¼•å·æ‹¬èµ·æ¥çš„ 'A' æ˜¯å­—ç¬¦å¸¸é‡ã€‚\n"); // å¯ä»¥ç”¨ \'

    return 0;
  }
  ```

# ğŸš€ 2-2: æ“çºµæ—¶é—´

## âœˆï¸ clock å‡½æ•°ï¼šè·å–ç¨‹åºå¯åŠ¨åç»è¿‡çš„æ—¶é—´

- List 2-5: å€’è®¡æ—¶åæ˜¾ç¤ºç¨‹åºè¿è¡Œæ—¶é—´

  ```c
  /**
   * @file chap02/countdown.c
   * @brief å€’è®¡æ—¶åæ˜¾ç¤ºç¨‹åºè¿è¡Œæ—¶é—´
   */

  #include <stdio.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€: 1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    clock_t c;

    for (int i = 10; i > 0; i--) {
      printf("\r%2d", i);
      fflush(stdout);
      sleep(1000);
    }
    printf("\r\aFIRE!!\n");

    c = clock();
    printf("ç¨‹åºå¼€å§‹è¿è¡Œåç»è¿‡äº† %.1f ç§’ã€‚\n", (double)c / CLOCKS_PER_SEC);

    return 0;
  }
  ```

## âœˆï¸ è®¡ç®—å¤„ç†æ‰€éœ€çš„æ—¶é—´

- List 2-6: å¿ƒç®—è®­ç»ƒï¼ˆè¿åŠ  3 ä¸ªä¸‰ä½æ•°çš„æ•´æ•°ï¼‰

  ```c
  /**
   * @file chap02/mental.c
   * @brief å¿ƒç®—è®­ç»ƒï¼ˆè¿åŠ  3 ä¸ªä¸‰ä½æ•°çš„æ•´æ•°ï¼‰
   * @attention
   * å› ä¸º clock() å‡½æ•°åœ¨ Linux å’Œ Windows ä¸‹çš„åŠŸèƒ½ä¸åŒï¼Œ
   * æ­¤ä¾‹åœ¨ Windows ä¸‹æ²¡é—®é¢˜ï¼Œåœ¨ Linux ä¸‹çš„æ—¶é—´æ€»æ˜¯ä¸º 0.0 ç§’ï¼Œ
   * Linux ä¸‹å¯ä»¥ä½¿ç”¨ gettimeofday() æˆ– ftime() å‡½æ•°
   */

  #include <stdio.h>
  #include <stdlib.h>
  #include <time.h>

  int main(void) {
    int a, b, c;        // è¦è¿›è¡ŒåŠ æ³•è¿ç®—çš„æ•°å€¼
    int x;              // å·²è¯»å–çš„å€¼
    clock_t start, end; // å¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´
    double req_time;    // æ‰€éœ€æ—¶é—´

    srand(time(NULL)); // è®¾å®šéšæœºæ•°çš„ç§å­

    a = 100 + rand() % 900; // ç”Ÿæˆ 100~999 çš„éšæœºæ•°
    b = 100 + rand() % 900;
    c = 100 + rand() % 900;

    printf("%d +%d + %d ç­‰äºå¤šå°‘ï¼š", a, b, c);

    start = clock(); // å¼€å§‹è®¡ç®—

    while (1) {
      scanf("%d", &x);
      if (x == a + b + c)
        break;
      printf("\aå›ç­”é”™è¯¯ï¼ï¼\nè¯·é‡æ–°è¾“å…¥ï¼š");
    }

    end = clock(); // è®¡ç®—ç»“æŸ
    printf("%ld\n", start);
    printf("%ld\n", end);

    req_time = (double)(end - start) / CLOCKS_PER_SEC;

    printf("ç”¨æ—¶ %.1f ç§’ã€‚\n", req_time);

    if (req_time > 30.0)
      printf("èŠ±å¤ªé•¿æ—¶é—´äº†ã€‚\n");
    else if (req_time > 17.0)
      printf("è¿˜è¡Œå§ã€‚\n");
    else
      printf("çœŸå¿«å•Šã€‚\n");

    return 0;
  }
  ```

## âœˆï¸ æš‚åœå¤„ç†ä¸€æ®µæ—¶é—´

- List 2-7: ç­‰å¾… x æ¯«ç§’

  ```c
  /**
   * @file chap02/sleep.c
   * @brief ç­‰å¾… x æ¯«ç§’
   * @attention
   * å…¶å®è¿™ä¸ªå‡½æ•°ä¸€ç›´å ç”¨ç€ CPUï¼Œæ˜¯è®© CPU æŒç»­è¿è¡Œäº† x æ¯«ç§’ï¼Œå¹¶ä¸æ˜¯é‡Šæ”¾ CPUï¼Œ
   * CPU ä¸€ç›´åœ¨è¿è¡Œè¿™ä¸ªå‡½æ•°é‡Œé¢çš„å†…å®¹ã€‚
   */

  #include <time.h>

  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }
  ```

# ğŸš€ 2-3: å­—å¹•æ˜¾ç¤º

- List 2-8: é€ä¸ªæ˜¾ç¤ºå­—ç¬¦ï¼Œå¾…å­—ç¬¦ä¸²æ˜¾ç¤ºå®Œæ¯•åï¼Œå†ä»åå¾€å‰é€ä¸ªæ¶ˆå»å­—ç¬¦ï¼Œåå¤æ‰§è¡Œæ­¤æ“ä½œ

  ```c
  /**
   * @file chap02/elastic.c
   * @brief é€ä¸ªæ˜¾ç¤ºå­—ç¬¦ï¼Œå¾…å­—ç¬¦ä¸²æ˜¾ç¤ºå®Œæ¯•åï¼Œå†ä»åå¾€å‰é€ä¸ªæ¶ˆå»å­—ç¬¦ï¼Œåå¤æ‰§è¡Œæ­¤æ“ä½œ
   */

  #include <stdio.h>
  #include <string.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€ï¼š1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    char name[]  = "BohYoh Shibeta"; // è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
    int name_len = strlen(name);     // å­—ç¬¦ä¸² name çš„å­—ç¬¦æ•°

    while (1) {
      for (int i = 0; i < name_len; i++) { // ä»å¤´å¼€å§‹é€ä¸ªæ˜¾ç¤ºå­—ç¬¦
        putchar(name[i]);
        fflush(stdout);
        sleep(500);
      }
      for (int i = 0; i < name_len; i++) { // ä»æœ«å°¾å¼€å§‹é€ä¸ªæ¶ˆå»å­—ç¬¦
        printf("\b \b");
        fflush(stdout);
        sleep(500);
      }
    }
    return 0;

    return 0;
  }
  ```

## âœˆï¸ å­—å¹•æ˜¾ç¤ºï¼ˆä»å³å¾€å·¦ï¼‰

- List 2-9: ç”¨å­—å¹•æ˜¾ç¤ºåå­—ï¼ˆå…¶ä¸€ï¼šä»å³å¾€å·¦æ»šåŠ¨å­—ç¬¦ï¼‰

  ```c
  /**
   * @file chap02/telop1.c
   * @brief ç”¨å­—å¹•æ˜¾ç¤ºåå­—ï¼ˆå…¶ä¸€ï¼šä»å³å¾€å·¦æ»šåŠ¨å­—ç¬¦ï¼‰
   */

  #include <stdio.h>
  #include <string.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€ï¼š1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    int cnt      = 0;            // ç¬¬å‡ ä¸ªå­—ç¬¦åœ¨æœ€å‰é¢
    char name[]  = "BohYoh ";    // è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
    int name_len = strlen(name); // å­—ç¬¦ä¸² name çš„å­—ç¬¦æ•°

    while (1) {
      putchar('\r'); // æŠŠå…‰æ ‡ç§»åˆ°æœ¬è¡Œå¼€å¤´
      for (int i = 0; i < name_len; i++) {
        if (cnt + i < name_len)
          putchar(name[cnt + i]);
        else
          putchar(name[cnt + i - name_len]);
      }
      fflush(stdout);
      sleep(500);

      if (cnt < name_len - 1)
        cnt++; // ä¸‹æ¬¡ä»åä¸€ä¸ªå­—ç¬¦å¼€å§‹æ˜¾ç¤º
      else
        cnt = 0; // ä¸‹æ¬¡ä»æœ€å‰é¢çš„å­—ç¬¦å¼€å§‹æ˜¾ç¤º
    }

    return 0;
  }
  ```

## âœˆï¸ å­—å¹•æ˜¾ç¤ºï¼ˆä»å·¦å¾€å³ï¼‰

- List 2-10: ç”¨å­—å¹•æ˜¾ç¤ºåå­—ï¼ˆå…¶äºŒï¼šä»å·¦å¾€å³æ»šåŠ¨å­—ç¬¦ï¼‰

  ```c
  /**
   * @file chap02/telop2.c
   * @brief ç”¨å­—å¹•æ˜¾ç¤ºåå­—ï¼ˆå…¶äºŒï¼šä»å·¦å¾€å³æ»šåŠ¨å­—ç¬¦
   */

  #include <stdio.h>
  #include <string.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€ï¼š1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    int cnt      = 0;            // ç¬¬å‡ ä¸ªå­—ç¬¦åœ¨æœ€å‰é¢
    char name[]  = "BohYoh ";    // è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
    int name_len = strlen(name); // å­—ç¬¦ä¸² name çš„å­—ç¬¦æ•°

    while (1) {
      putchar('\r'); // æŠŠå…‰æ ‡ç§»åˆ°æœ¬è¡Œå¼€å¤´
      for (int i = 0; i < name_len; i++) {
        if (cnt + i < name_len)
          putchar(name[cnt + i]);
        else
          putchar(name[cnt + i - name_len]);
      }
      fflush(stdout);
      sleep(500);

      if (cnt > 0)
        cnt--;
      else
        cnt = name_len - 1; // ä¸‹æ¬¡ä»æœ€å‰é¢çš„å­—ç¬¦å¼€å§‹æ˜¾ç¤º
    }

    return 0;
  }
  ```

# ğŸš€ 2-4: æ ¼å¼è¾“å…¥è¾“å‡º

## âœˆï¸ æŠŠè¦æ˜¾ç¤ºçš„ä½æ•°æŒ‡å®šä¸ºå˜é‡

- List 2-11: æŠŠæ•°å­—å­—ç¬¦æ¯æ¬¡åç§» 1 ä½æ˜¾ç¤ºï¼ˆå…¶ä¸€ï¼‰

  ```c
  /**
   * @file chap02/stair1.c
   * @brief æŠŠæ•°å­—å­—ç¬¦æ¯æ¬¡åç§» 1 ä½æ˜¾ç¤ºï¼ˆå…¶ä¸€ï¼‰
   */

  #include <stdio.h>

  int main(void) {
    int x; // è¦æ˜¾ç¤ºçš„è¡Œæ•°

    printf("è¦æ˜¾ç¤ºå¤šå°‘è¡Œï¼š");
    scanf("%d", &x);

    for (int i = 1; i <= x; i++) {
      for (int j = 1; j < i; j++)
        putchar(' ');
      printf("%d\n", i % 10);
    }

    return 0;
  }
  ```

- List 2-12: æŠŠæ•°å­—å­—ç¬¦æ¯æ¬¡åç§» 1 ä½æ˜¾ç¤ºï¼ˆå…¶äºŒï¼‰

  ```c
  /**
   * @file main.c
   * @brief æŠŠæ•°å­—å­—ç¬¦æ¯æ¬¡åç§» 1 ä½æ˜¾ç¤ºï¼ˆå…¶äºŒï¼‰
   */

  #include <stdio.h>

  int main(void) {
    int x; // è¦æ˜¾ç¤ºçš„è¡Œæ•°

    printf("è¦æ˜¾ç¤ºå¤šå°‘è¡Œï¼š");
    scanf("%d", &x);

    for (int i = 1; i <= x; i++)
      printf("%*d\n", i, i % 10);

    return 0;
  }
  ```

## âœˆï¸ æ˜¾ç¤ºä»»æ„æ•°é‡çš„ç©ºç™½å­—ç¬¦

- List 2-13: åŒæ—¶è®­ç»ƒæ‰©å¤§æ°´å¹³æ–¹å‘è§†é‡çš„å¿ƒç®—è®­ç»ƒ

  ```c
  /**
   * @file chap02/vision.c
   * @brief åŒæ—¶è®­ç»ƒæ‰©å¤§æ°´å¹³æ–¹å‘è§†é‡çš„å¿ƒç®—è®­ç»ƒ
   * @attention
   * å› ä¸º clock() å‡½æ•°åœ¨ Linux å’Œ Windows ä¸‹çš„åŠŸèƒ½ä¸åŒï¼Œ
   * æ­¤ä¾‹åœ¨ Windows ä¸‹æ²¡é—®é¢˜ï¼Œåœ¨ Linux ä¸‹çš„æ—¶é—´æ€»æ˜¯ä¸º 0.0 ç§’ï¼Œ
   * Linux ä¸‹å¯ä»¥ä½¿ç”¨ gettimeofday() æˆ– ftime() å‡½æ•°
   */

  #include <stdio.h>
  #include <stdlib.h>
  #include <time.h>

  int main(void) {
    int a, b, c;        // è¦è¿›è¡ŒåŠ æ³•è¿ç®—çš„æ•°å€¼
    int x;              // å·²è¯»å–çš„å€¼
    int n;              // ç©ºç™½çš„å®½åº¦
    clock_t start, end; // å¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´

    srand(time(NULL)); // è®¾å®šéšæœºæ•°çš„ç§å­

    printf("æ‰©å¤§è§†é‡å¿ƒç®—è®­ç»ƒå¼€å§‹ï¼ï¼\n");
    start = clock(); // å¼€å§‹è®¡ç®—

    for (int stage = 0; stage < 10; stage++) {
      a = 10 + rand() % 90; // ç”Ÿæˆ 10~99 çš„éšæœºæ•°
      b = 10 + rand() % 90;
      c = 10 + rand() % 90;
      n = rand() % 17; // ç”Ÿæˆ 0~16 çš„éšæœºæ•°

      printf("%d%*s+%*s%d%*s+%*s%d = ", a, n, " ", n, " ", b, n, " ", n, " ", c);
      do {
        scanf("%d", &x);
        if (x == a + b + c)
          break;
        printf("\aå›ç­”é”™è¯¯ã€‚è¯·é‡æ–°è¾“å…¥ï¼š");
      } while (1);
    }
    end = clock(); // è®¡ç®—ç»“æŸ
    printf("ç”¨æ—¶ %.1f ç§’ã€‚\n", (double)(end - start) / CLOCKS_PER_SEC);

    return 0;
  }
  ```

# ğŸš€ è‡ªç”±æ¼”ç»ƒ

## âœˆï¸ ç»ƒä¹  2-1

- List 2-5 æ˜¯ä¸€ä¸ªç”¨ç§’æ•°æ¥è¡¨ç¤ºç¨‹åºå¼€å§‹åç»è¿‡çš„æ—¶é—´çš„ç¨‹åºã€‚è¯·æ”¹å†™ç¨‹åºï¼Œ
  ä»¤å…¶ä¸ä»…èƒ½ç”¨ç§’æ•°ï¼Œè¿˜èƒ½ç”¨æ—¶é’Ÿæ•°æ¥è¡¨ç¤ºæ—¶é—´ã€‚

  ```c
  /**
   * @file main.c
   * @brief æ”¹å†™ List 2-5
   * @version 0.0.1
   * @date 2022-01-02 14:56:15
   * @author yyangdid (yyangdid@gmail.com)
   * @details
   * List 2-5 æ˜¯ä¸€ä¸ªç”¨ç§’æ•°æ¥è¡¨ç¤ºç¨‹åºå¼€å§‹åç»è¿‡çš„æ—¶é—´çš„ç¨‹åºã€‚è¯·æ”¹å†™ç¨‹åºï¼Œ
   * ä»¤å…¶ä¸ä»…èƒ½ç”¨ç§’æ•°ï¼Œè¿˜èƒ½ç”¨æ—¶é’Ÿæ•°æ¥è¡¨ç¤ºæ—¶é—´ã€‚
   */

  #include <stdio.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€: 1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  int main(void) {
    clock_t c;

    for (int i = 10; i > 0; i--) {
      printf("\r%2d", i);
      fflush(stdout);
      sleep(1000);
    }
    printf("\r\aFIRE!!\n");

    c = clock();
    printf("ç¨‹åºå¼€å§‹è¿è¡Œåç»è¿‡äº† %ld ä¸ªæ—¶é’Ÿæ•°ï¼Œå³ %.1f ç§’ã€‚\n", c,
           (double)c / CLOCKS_PER_SEC);

    return 0;
  }
  ```

## âœˆï¸ ç»ƒä¹  2-2

- ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä»¤å…¶èƒ½ä»å­—ç¬¦ä¸²å¼€å¤´é€ä¸€æ˜¾ç¤ºå­—ç¬¦ã€‚
  `void gput(const char *s, int speed)`
  åœ¨è¿™é‡Œï¼Œs æ˜¯è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œspeed æ˜¯ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ˜¾ç¤ºé€Ÿåº¦ã€‚
  ä¾‹å¦‚è°ƒç”¨ä»£ç  `gput("ABC", 100)`ï¼Œé¦–å…ˆä¼šæ˜¾ç¤º 'A'ï¼Œ100 æ¯«ç§’åæ˜¾ç¤º 'B'ï¼Œ
  å†è¿‡ 100 æ¯«ç§’åæ˜¾ç¤º 'C'ã€‚å½“æ˜¾ç¤ºå®Œ "ABC" å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åï¼Œè¿”å›åˆ°è°ƒç”¨æ–¹ã€‚

  ```c
  /**
   * @file main.c
   * @brief ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä»¤å…¶èƒ½ä»å­—ç¬¦ä¸²å¼€å¤´é€ä¸€æ˜¾ç¤ºå­—ç¬¦ã€‚
   * @version 0.0.1
   * @date 2022-01-02 15:27:52
   * @author yyangdid (yyangdid@gmail.com)
   * @details
   * ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä»¤å…¶èƒ½ä»å­—ç¬¦ä¸²å¼€å¤´é€ä¸€æ˜¾ç¤ºå­—ç¬¦ã€‚
   * `void gput(const char *s, int speed)`
   * åœ¨è¿™é‡Œï¼Œs æ˜¯è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œspeed æ˜¯ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ˜¾ç¤ºé€Ÿåº¦ã€‚
   * ä¾‹å¦‚è°ƒç”¨ä»£ç  `gput("ABC", 100)`ï¼Œé¦–å…ˆä¼šæ˜¾ç¤º 'A'ï¼Œ100 æ¯«ç§’åæ˜¾ç¤º 'B'ï¼Œ
   * å†è¿‡ 100 æ¯«ç§’åæ˜¾ç¤º 'C'ã€‚å½“æ˜¾ç¤ºå®Œ "ABC" å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åï¼Œè¿”å›åˆ°è°ƒç”¨æ–¹ã€‚
   */

  #include <stdio.h>
  #include <stdlib.h>
  #include <string.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€ï¼š1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < (double)x);
    return 1;
  }

  /**
   * @brief é€å­—æ˜¾ç¤ºå­—ç¬¦ä¸² sï¼Œå­—ç¬¦æ˜¾ç¤ºé—´éš”ä¸º speed æ¯«ç§’
   * @param[in] s å­—ç¬¦ä¸²æŒ‡é’ˆ
   * @param[in] speed é—´éš”ï¼ˆæ¯«ç§’ï¼‰
   */
  void gput(const char *s, int speed) {
    int s_len = (int)strlen(s);

    for (int i = 0; i < s_len; i++) {
      printf("%c", s[i]); // æˆ– putchar(s[i]);
      fflush(stdout);
      sleep(speed);
    }
  }

  int main(void) {
    char a[]  = "ABCDEF";
    int speed = 500;

    gput(a, speed);

    putchar('\n');

    return 0;
  }
  ```

## âœˆï¸ ç»ƒä¹  2-3

- ç¼–å†™ä¸€ä¸ªé—ªçƒæ˜¾ç¤ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚`void bput(const char *s, int d, int e, int n);`
  å­—ç¬¦ä¸² s æ˜¾ç¤º d æ¯«ç§’åï¼Œæ¶ˆå¤± e æ¯«ç§’ï¼Œåå¤æ‰§è¡Œä¸Šè¿°æ“ä½œ n æ¬¡åè¿”å›åˆ°è°ƒç”¨æ–¹ã€‚
  ä¸å¦¨å‡è®¾å­—ç¬¦ä¸² s åªæœ‰ä¸€è¡Œï¼ˆå³ä¸åŒ…å«æ¢è¡Œç¬¦ç­‰ç¬¦å·ï¼Œ
  è€Œä¸”å­—ç¬¦ä¸²çš„é•¿åº¦å°äºæ§åˆ¶å°ç”»é¢çš„å®½åº¦ï¼‰ã€‚

  ```c
  /**
   * @file main.c
   * @brief é—ªçƒæ˜¾ç¤ºå­—ç¬¦ä¸²
   * @version 0.0.1
   * @date 2022-01-02 17:29:46
   * @author yyangdid (yyangdid@gmail.com)
   * @details
   * ç¼–å†™ä¸€ä¸ªé—ªçƒæ˜¾ç¤ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚`void bput(const char *s, int d, int e, int n);`
   * å­—ç¬¦ä¸² s æ˜¾ç¤º d æ¯«ç§’åï¼Œæ¶ˆå¤± e æ¯«ç§’ï¼Œåå¤æ‰§è¡Œä¸Šè¿°æ“ä½œ n æ¬¡åè¿”å›åˆ°è°ƒç”¨æ–¹ã€‚
   * ä¸å¦¨å‡è®¾å­—ç¬¦ä¸² s åªæœ‰ä¸€è¡Œï¼ˆå³ä¸åŒ…å«æ¢è¡Œç¬¦ç­‰ç¬¦å·ï¼Œ
   * è€Œä¸”å­—ç¬¦ä¸²çš„é•¿åº¦å°äºæ§åˆ¶å°ç”»é¢çš„å®½åº¦ï¼‰ã€‚
   */

  #include <stdio.h>
  #include <string.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€ï¼š1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  /**
   * @brief é—ªçƒæ˜¾ç¤ºå­—ç¬¦ä¸²
   * @param[i] s å­—ç¬¦ä¸²
   * @param[i] d æ˜¾ç¤º d æ¯«ç§’
   * @param[i] e æ¶ˆå¤± e æ¯«ç§’
   * @param[i] n é—ªçƒ n æ¬¡
   */
  void bput(const char *s, int d, int e, int n) {
    int s_len = strlen(s);

    for (int i = 0; i < n; i++) {
      printf("\r%s", s);
      fflush(stdout);
      sleep(d);
      printf("\r%*s", s_len, " ");
      fflush(stdout);
      sleep(e);
    }
  }

  int main(void) {
    char s[] = "good good study, day day up!";
    int d = 500, e = 500, n = 10;

    bput(s, d, e, n);

    putchar('\n');

    return 0;
  }
  ```

## âœˆï¸ ç»ƒä¹  2-4

- ç¼–å†™ä¸€ä¸ªå¦‚å­—å¹•èˆ¬æ˜¾ç¤ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚
  `void telop(const char *s, int direction, int speed, int n);`
  å…¶ä¸­ï¼Œs æ˜¯è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œdirection æ˜¯å­—å¹•æ»šåŠ¨çš„æ–¹å‘ï¼ˆä»å³å¾€å·¦æ˜¯ 0ï¼Œ
  ä»å·¦å¾€å³æ˜¯ 1ï¼‰ï¼Œspeed æ˜¯ä»¥æ¯«ç§’ä¸ºå•ä½çš„é€Ÿåº¦ï¼Œn æ˜¯æ˜¾ç¤ºæ¬¡æ•°ã€‚
  ä¸å¦¨å‡è®¾å­—ç¬¦ä¸² s åªæœ‰ä¸€è¡Œã€‚

  ```c
  /**
   * @file main.c
   * @brief å­—å¹•èˆ¬æ˜¾ç¤ºå­—ç¬¦ä¸²
   * @version 0.0.1
   * @date 2022-01-02 18:24:56
   * @author yyangdid (yyangdid@gmail.com)
   * @details
   * ç¼–å†™ä¸€ä¸ªå¦‚å­—å¹•èˆ¬æ˜¾ç¤ºå­—ç¬¦ä¸²çš„å‡½æ•°ã€‚
   * `void telop(const char *s, int direction, int speed, int n);`
   * å…¶ä¸­ï¼Œs æ˜¯è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œdirection æ˜¯å­—å¹•æ»šåŠ¨çš„æ–¹å‘ï¼ˆä»å³å¾€å·¦æ˜¯ 0ï¼Œ
   * ä»å·¦å¾€å³æ˜¯ 1ï¼‰ï¼Œspeed æ˜¯ä»¥æ¯«ç§’ä¸ºå•ä½çš„é€Ÿåº¦ï¼Œn æ˜¯æ˜¾ç¤ºæ¬¡æ•°ã€‚
   * ä¸å¦¨å‡è®¾å­—ç¬¦ä¸² s åªæœ‰ä¸€è¡Œã€‚
   */

  #include <stdio.h>
  #include <string.h>
  #include <time.h>

  /**
   * @brief ç­‰å¾… x æ¯«ç§’
   * @param[in] x æ¯«ç§’
   * @return int, æ‰§è¡ŒçŠ¶æ€ï¼Œ1 ä¸ºæˆåŠŸï¼Œ0 ä¸ºå¤±è´¥
   */
  int sleep(unsigned long x) {
    clock_t c1 = clock(), c2;
    do {
      if ((c2 = clock()) == (clock_t)-1) // é”™è¯¯
        return 0;
    } while (1000.0 * (c2 - c1) / CLOCKS_PER_SEC < x);
    return 1;
  }

  /**
   * @brief å­—å¹•èˆ¬æ»šåŠ¨å­—ç¬¦ä¸²
   * @param[in] s å­—ç¬¦ä¸²
   * @param[in] direction æ»šåŠ¨æ–¹å‘ï¼ˆ0 ä¸ºä»å³å¾€å·¦ï¼Œ1 ä¸ºä»å·¦å¾€å³ï¼‰
   * @param[in] speed æ»šåŠ¨é€Ÿåº¦ï¼ˆæ¯«ç§’ï¼‰
   * @param[in] n æ˜¾ç¤ºæ¬¡æ•°
   */
  void telop(const char *s, int direction, int speed, int n) {
    int cnt   = 0;         // ç¬¬å‡ ä¸ªå­—ç¬¦åœ¨æœ€å‰é¢
    int s_len = strlen(s); // å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°

    while (n) {
      putchar('\r'); // å…‰æ ‡ç§»åˆ°è¡Œé¦–
      for (int i = 0; i < s_len; i++) {
        if (cnt + i < s_len)
          putchar(s[cnt + i]);
        else
          putchar(s[cnt + i - s_len]);
      }
      fflush(stdout);
      sleep(speed);
      if (direction) {
        if (cnt > 0)
          cnt--;
        else {
          cnt = s_len - 1;
          n--;
        }
      } else {
        if (cnt < s_len - 1)
          cnt++;
        else {
          cnt = 0;
          n--;
        }
      }
    }
  }

  int main(void) {
    char s[]      = "Hello World! ";
    int direction = 0;
    int speed     = 300;
    int n         = 5;

    telop(s, direction, speed, n);

    putchar('\n');

    return 0;
  }
  ```

## âœˆï¸ ç»ƒä¹  2-5

- List 2-13 çš„ â€œå¿ƒç®—è®­ç»ƒâ€ ç¨‹åºæ˜¾ç¤ºçš„æ˜¯è¿›è¡Œ 10 æ¬¡åŠ æ³•è¿ç®—æ‰€éœ€è¦çš„æ—¶é—´ã€‚
  æ”¹å†™ç¨‹åºï¼Œä»¤å…¶èƒ½æ˜¾ç¤ºæ¯æ¬¡è¿ç®—æ‰€éœ€è¦çš„æ—¶é—´å’Œè¿ç®—çš„å¹³å‡æ—¶é—´ã€‚

  ```c
  /**
   * @file main.c
   * @brief æ”¹å†™ List 2-13
   * @version 0.0.1
   * @date 2022-01-02 19:38:05
   * @author yyangdid (yyangdid@gmail.com)
   * @details
   * List 2-13 çš„ â€œå¿ƒç®—è®­ç»ƒâ€ ç¨‹åºæ˜¾ç¤ºçš„æ˜¯è¿›è¡Œ 10 æ¬¡åŠ æ³•è¿ç®—æ‰€éœ€è¦çš„æ—¶é—´ã€‚
   * æ”¹å†™ç¨‹åºï¼Œä»¤å…¶èƒ½æ˜¾ç¤ºæ¯æ¬¡è¿ç®—æ‰€éœ€è¦çš„æ—¶é—´å’Œè¿ç®—çš„å¹³å‡æ—¶é—´ã€‚
   * @attention
   * å› ä¸º clock() å‡½æ•°åœ¨ Linux å’Œ Windows ä¸‹çš„åŠŸèƒ½ä¸åŒï¼Œ
   * æ­¤ä¾‹åœ¨ Windows ä¸‹æ²¡é—®é¢˜ï¼Œåœ¨ Linux ä¸‹çš„æ—¶é—´æ€»æ˜¯ä¸º 0.0 ç§’ï¼Œ
   * Linux ä¸‹å¯ä»¥ä½¿ç”¨ gettimeofday() æˆ– ftime() å‡½æ•°
   */

  #include <stdio.h>
  #include <stdlib.h>
  #include <time.h>

  int main(void) {
    int a, b, c;         // è¦è¿›è¡ŒåŠ æ³•è¿ç®—çš„æ•°å€¼
    int x;               // å·²è¯»å–çš„å€¼
    int n;               // ç©ºç™½çš„å®½åº¦
    clock_t start, end;  // å¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´
    double tm;           // æ¯ç­”å¯¹ä¸€é¢˜çš„ç”¨æ—¶
    double tm_sum = 0.0; // æ€»ç”¨æ—¶

    srand(time(NULL)); // è®¾å®šéšæœºæ•°çš„ç§å­

    printf("æ‰©å¤§è§†é‡å¿ƒç®—è®­ç»ƒå¼€å§‹ï¼ï¼\n");

    for (int stage = 0; stage < 10; stage++) {
      a = 10 + rand() % 90; // ç”Ÿæˆ 10~99 çš„éšæœºæ•°
      b = 10 + rand() % 90;
      c = 10 + rand() % 90;
      n = rand() % 17; // ç”Ÿæˆ 0~16 çš„éšæœºæ•°

      printf("%d%*s+%*s%d%*s+%*s%d = ", a, n, " ", n, " ", b, n, " ", n, " ", c);
      start = clock(); // å¼€å§‹è®¡ç®—

      do {
        scanf("%d", &x);
        if (x == a + b + c) {
          end = clock(); // è®¡ç®—ç»“æŸ
          break;
        }
        printf("\aå›ç­”é”™è¯¯ã€‚è¯·é‡æ–°è¾“å…¥ï¼š");
      } while (1);

      tm = (double)(end - start) / CLOCKS_PER_SEC;
      printf("æœ¬é¢˜ç”¨æ—¶ %.1f ç§’\n", tm);
      tm_sum += tm;
    }

    printf("æ€»è®¡ç”¨æ—¶ %.1f ç§’ï¼Œå¹³å‡æ¯é¢˜ç”¨æ—¶ %.1f ç§’\n", tm_sum, tm_sum / 10);

    return 0;
  }
  ```

## âœˆï¸ ç»ƒä¹  2-6

- æŠŠä¸Šé¢çš„ç¨‹åºæ”¹å†™æˆèƒ½è¿›è¡ŒåŠ æ³•å’Œå‡æ³•è¿ç®—çš„ç¨‹åºï¼Œæ¯æ¬¡éšæœºå†³å®šè¿›è¡Œå“ªç§è¿ç®—ã€‚
  ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾ä¸‰ä¸ªå€¼æ˜¯ aã€bã€cï¼Œæ¯æ¬¡éƒ½é€šè¿‡éšæœºæ•°æ¥ä»ä¸‹åˆ—ç»„åˆä¸­é€‰ä¸€ä¸ªè¿›è¡Œå‡ºé¢˜ã€‚

  - a + b + c
  - a + b - c
  - a - b + c
  - a - b - c

  ```c
  /**
   * @file main.c
   * @brief æ”¹å†™ç»ƒä¹  2-5
   * @version 0.0.1
   * @date 2022-01-02 20:03:05
   * @author yyangdid (yyangdid@gmail.com)
   * @details
   * æŠŠä¸Šé¢çš„ç¨‹åºæ”¹å†™æˆèƒ½è¿›è¡ŒåŠ æ³•å’Œå‡æ³•è¿ç®—çš„ç¨‹åºï¼Œæ¯æ¬¡éšæœºå†³å®šè¿›è¡Œå“ªç§è¿ç®—ã€‚
   * ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾ä¸‰ä¸ªå€¼æ˜¯ aã€bã€cï¼Œæ¯æ¬¡éƒ½é€šè¿‡éšæœºæ•°æ¥ä»ä¸‹åˆ—ç»„åˆä¸­é€‰ä¸€ä¸ªè¿›è¡Œå‡ºé¢˜ã€‚
   * - a + b + c
   * - a + b - c
   * - a - b + c
   * - a - b - c
   * @attention
   * å› ä¸º clock() å‡½æ•°åœ¨ Linux å’Œ Windows ä¸‹çš„åŠŸèƒ½ä¸åŒï¼Œ
   * æ­¤ä¾‹åœ¨ Windows ä¸‹æ²¡é—®é¢˜ï¼Œåœ¨ Linux ä¸‹çš„æ—¶é—´æ€»æ˜¯ä¸º 0.0 ç§’ï¼Œ
   * Linux ä¸‹å¯ä»¥ä½¿ç”¨ gettimeofday() æˆ– ftime() å‡½æ•°
   */

  #include <stdio.h>
  #include <stdlib.h>
  #include <time.h>

  int main(void) {
    int a, b, c;         // è¦è¿›è¡ŒåŠ æ³•è¿ç®—çš„æ•°å€¼
    int x;               // å·²è¯»å–çš„å€¼
    int n;               // ç©ºç™½çš„å®½åº¦
    int z;               // é¢˜å‹
    clock_t start, end;  // å¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´
    double tm;           // æ¯ç­”å¯¹ä¸€é¢˜çš„ç”¨æ—¶
    double tm_sum = 0.0; // æ€»ç”¨æ—¶
    int res;             // æ­£ç¡®ç­”æ¡ˆ

    srand(time(NULL)); // è®¾å®šéšæœºæ•°çš„ç§å­

    printf("æ‰©å¤§è§†é‡å¿ƒç®—è®­ç»ƒå¼€å§‹ï¼ï¼\n");

    for (int stage = 0; stage < 10; stage++) {
      a = 10 + rand() % 90; // ç”Ÿæˆ 10~99 çš„éšæœºæ•°
      b = 10 + rand() % 90;
      c = 10 + rand() % 90;
      n = rand() % 17; // ç”Ÿæˆ 0~16 çš„éšæœºæ•°
      z = rand() % 4;  // ç”Ÿæˆ 0~3 çš„éšæœºæ•°

      switch (z) {
      case 0:
        printf("%d%*s+%*s%d%*s+%*s%d = ", a, n, " ", n, " ", b, n, " ", n, " ",
               c);
        res = a + b + c;
        break;
      case 1:
        printf("%d%*s+%*s%d%*s-%*s%d = ", a, n, " ", n, " ", b, n, " ", n, " ",
               c);
        res = a + b - c;
        break;
      case 2:
        printf("%d%*s-%*s%d%*s+%*s%d = ", a, n, " ", n, " ", b, n, " ", n, " ",
               c);
        res = a - b + c;
        break;
      default:
        printf("%d%*s-%*s%d%*s-%*s%d = ", a, n, " ", n, " ", b, n, " ", n, " ",
               c);
        res = a - b - c;
        break;
      }

      start = clock(); // å¼€å§‹è®¡ç®—

      do {
        scanf("%d", &x);
        if (x == res) {
          end = clock(); // è®¡ç®—ç»“æŸ
          break;
        }
        printf("\aå›ç­”é”™è¯¯ã€‚è¯·é‡æ–°è¾“å…¥ï¼š");
      } while (1);

      tm = (double)(end - start) / CLOCKS_PER_SEC;
      printf("æœ¬é¢˜ç”¨æ—¶ %.1f ç§’\n", tm);
      tm_sum += tm;
    }

    printf("æ€»è®¡ç”¨æ—¶ %.1f ç§’ï¼Œå¹³å‡æ¯é¢˜ç”¨æ—¶ %.1f ç§’\n", tm_sum, tm_sum / 10);

    return 0;
  }
  ```
